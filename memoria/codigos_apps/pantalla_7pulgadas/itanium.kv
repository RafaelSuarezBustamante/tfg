#:import KivyLexer kivy.extras.highlight.KivyLexer
#:import Factory kivy.factory.Factory
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition

<ActionSpinnerOptions@SpinnerOption>
    background_color: .4, .4, .4, 1


<ActionSpinner@Spinner+ActionItem>
    canvas.before:
        Color:
            rgba: 0.128, 0.128, 0.128, 1
        Rectangle:
            size: self.size
            pos: self.pos
    border: 27, 20, 12, 12
    background_normal: 'data/icons/boton_home.png'
    option_cls: Factory.ActionSpinnerOptions

<Itanium>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: False if root.fullscreen else (content.height > root.height - dp(16))
        AnchorLayout:
            size_hint_y: None
            height: root.height if root.fullscreen else max(root.height, content.height)
            GridLayout:
                id: content
                cols: 1
                spacing: '8dp'
                padding: '8dp'
                size_hint: (1, 1) if root.fullscreen else (.8, None)
                height: self.height if root.fullscreen else self.minimum_height

BoxLayout:
    orientation: 'vertical'
	spacing: 1
    
    ActionBar:
        id: ab
		size_hint: 1,.2
    	ActionView:
    		id: av
    		ActionPrevious:
    			title:'TFG'
    			on_release: 
                    if sm.current != 'PantallaPrincipal':\
                    idx = app.screen_names.index('PantallaPrincipal');\
                    app.go_screen(idx)
                important: True

            ActionButton: 
                id: conexion  
                size_hint: .8,1
                pos_hint: {'center_y':.5} 
                disabled: True
            
            ActionButton:   
                icon: 'data/icons/boton_home.png'
                size_hint: 1,1
                pos_hint: {'center_y':.5} 
                on_release:
                    if sm.current != 'PantallaPrincipal':\
                    idx = app.screen_names.index('PantallaPrincipal');\
                    app.go_screen(idx)
                important: True
            
            
            ActionButton:   
                icon: 'data/icons/boton_juegos.png'
                size_hint: 1,1
                pos_hint: {'center_y':.45} 
                on_release:
                    if sm.current != 'PantallaJuegos':\
                    idx = app.screen_names.index('PantallaJuegos');\
                    app.go_screen(idx)
                important: True


            ActionButton: 
                icon: 'data/icons/boton_ayuda.png'
                size_hint: 1,1
                pos_hint: {'center_y':.45} 
                on_release:
                    if sm.current != 'PantallaAyuda':\
                    idx = app.screen_names.index('PantallaAyuda');\
                    app.go_screen(idx)
                important: True

            ActionButton:   
                icon: 'data/icons/boton_config.png'
                size_hint: 1,1
                pos_hint: {'center_y':.45} 
                on_release:
                    if sm.current != 'PantallaConfigurar':\
                    idx = app.screen_names.index('PantallaConfigurar');\
                    app.go_screen(idx)
                important: True

            ActionButton:   
                icon: 'data/icons/boton_salir.png'
                size_hint: .8,.8
                pos_hint: {'center_y':.45} 
                text: str(root.ids.sm)
                on_press: 
                    app.iniciar = False
                    app.finalizar_conexion()
                    app.get_running_app().stop()
                    app.finalizar()
                important: True

            
 
                    
    ScreenManager:
        id: sm
  